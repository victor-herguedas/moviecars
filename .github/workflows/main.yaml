name: Mi primera integración continua

on: push

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Descargar Repositorio
              uses: actions/checkout@v2
            - name: Instalar JDK 11
              uses: actions/setup-java@v2
              with:
                distribution: 'adopt'
                java-version: '11'
            - name: Construir con maven
              run: |
                mvn clean package -DskipTests
                ls /target
            - name: Guardar paquete .jar para después desplegar
              uses: actions/upload-artifact@v4
              with:
                name: moviecards-java
                path: "${{ github.workspace }}/target/*.jar"

    test:
        needs: build
        runs-on: ubuntu-latest
        steps:
            - name: pruebas
              run: echo "Ejecutando los tests"

    controlar_calidad:
        needs: test
        runs-on: ubuntu-latest
        steps:
            - name: calidad
              run: echo "Controlando la calidad del código"

    deploy:
        needs: test
        runs-on: ubuntu-latest
        steps:
            - name: despliegue
              run: echo "Desplegando la aplicación"

            - name: notificación
              run: echo "Notificando el despliegue"
              if: always()
    
